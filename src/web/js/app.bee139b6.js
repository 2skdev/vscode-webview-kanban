(function(e){function t(t){for(var r,i,a=t[0],d=t[1],u=t[2],l=0,b=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&b.push(o[i][0]),o[i]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(e[r]=d[r]);s&&s(t);while(b.length)b.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var d=n[a];0!==o[d]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var s=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"4dc0":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o=(n("b0c0"),n("a434"),n("d3b7"),n("159b"),n("ac1f"),n("466d"),n("498a"),n("99af"),n("a15b"),n("5502")),c=n("7c5c"),i=Object(o["a"])({state:function(){return{name:"TODO",boards:[]}},mutations:{setName:function(e,t){var n=t.name;e.name=n},addTicket:function(e,t){var n=t.boardIndex,r=t.data;e.boards[n].tickets.unshift(r)},removeTicket:function(e,t){var n=t.boardIndex,r=t.ticketIndex;e.boards[n].tickets.splice(r,1)},clearTicket:function(e,t){var n=t.boardIndex;e.boards[n].tickets=[]},updateTicket:function(e,t){var n=t.boardIndex,r=t.ticketIndex,o=t.data;e.boards[n].tickets[r]=o},setBoard:function(e,t){var n=t.boardIndex,r=t.data;e.boards[n].tickets=r},addBoard:function(e,t){var n=t.title,r=t.done;e.boards.push({title:n,done:r,tickets:[]})},clearBoards:function(e){e.boards=[]}},actions:{parseMarkdown:function(e,t){var n=t.markdown;e.commit("clearBoards");var r=new DOMParser,o=r.parseFromString(Object(c["marked"])(n),"text/html");e.commit("setName",{name:o.querySelector("h1").innerHTML}),o.querySelectorAll("h2").forEach((function(t){var n=t.innerHTML,r=n.match(/\[x\]\s*(.*)/);null!=r&&(n=r[1]),e.commit("addBoard",{title:n,done:null!=r});var o=t.nextElementSibling;null!=o&&"UL"==o.tagName&&o.children.forEach((function(t){t.querySelector("input").remove(),e.commit("addTicket",{boardIndex:e.state.boards.length-1,data:t.innerHTML.trim()})}))})),e.dispatch("convertMarkdown")},convertMarkdown:function(e){var t=[];return t.push("# ".concat(e.state.name)),t.push(""),e.state.boards.forEach((function(e){t.push("## ".concat(e.done?"[x] ":"").concat(e.title)),e.tickets.forEach((function(n){t.push("- [".concat(e.done?"x":" ","] ").concat(n))})),t.push("")})),t.join("\n")}}}),a=["innerHTML"],d={class:"boards-container"};function u(e,t,n,o,c,i){var u=Object(r["resolveComponent"])("board");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("h1",{innerHTML:o.todoName},null,8,a),Object(r["createElementVNode"])("button",{class:"add-task-button",onClick:t[0]||(t[0]=function(){return i.addnew&&i.addnew.apply(i,arguments)})},"+"),Object(r["createElementVNode"])("div",d,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(o.boardCount,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{ref_for:!0,ref:"board",key:t,"board-index":t},null,8,["board-index"])})),128))])])}var s={class:"board"},l=["innerHTML"];function b(e,t,n,o,c,i){var a=Object(r["resolveComponent"])("ticket"),d=Object(r["resolveComponent"])("draggable");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",s,[Object(r["createElementVNode"])("h2",{class:"board-title",innerHTML:o.title},null,8,l),Object(r["createVNode"])(d,{modelValue:i.dictTickets,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.dictTickets=e}),group:"board","item-key":"index",animation:"300",onStart:t[1]||(t[1]=function(e){return c.dragging=!0}),onEnd:t[2]||(t[2]=function(e){return c.dragging=!1}),handle:".ticket-show"},{item:Object(r["withCtx"])((function(e){var t=e.element;return[Object(r["createVNode"])(a,{ref:"ticket_"+t.index,boardIndex:n.boardIndex,ticketIndex:t.index,dragging:c.dragging,onNext:function(e){return i.next(t.index)},onPrev:function(e){return i.prev(t.index)}},null,8,["boardIndex","ticketIndex","dragging","onNext","onPrev"])]})),_:1},8,["modelValue"])])}n("d81d");var f=n("b76a"),p=n.n(f),m=["innerHTML"];function h(e,t,n,o,c,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:Object(r["normalizeClass"])(["ticket-bg",{"ticket-bg-focus":c.editing}]),onMouseover:t[7]||(t[7]=function(e){return c.visible=!0}),onMouseleave:t[8]||(t[8]=function(e){return c.visible=!1})},[c.editing?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("textarea",{key:1,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.text=e}),ref:"input",class:"ticket-input",placeholder:"New Task",onBlur:t[2]||(t[2]=function(e){return c.editing=!1}),onKeydown:[t[3]||(t[3]=Object(r["withKeys"])(Object(r["withModifiers"])((function(e){return c.editing=!1}),["prevent"]),["enter"])),t[4]||(t[4]=Object(r["withKeys"])(Object(r["withModifiers"])((function(t){return e.$emit("next")}),["prevent","exact"]),["tab"])),t[5]||(t[5]=Object(r["withKeys"])(Object(r["withModifiers"])((function(t){return e.$emit("prev")}),["prevent","shift","exact"]),["tab"]))]},null,544)),[[r["vModelText"],i.text]]):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,innerHTML:i.parsedHtml,class:"ticket-show",style:Object(r["normalizeStyle"])(o.done?"text-decoration: line-through;":""),ref:"show",onClick:t[0]||(t[0]=function(e){return c.editing=!0})},null,12,m)),Object(r["withDirectives"])(Object(r["createElementVNode"])("button",{class:"ticket-delete-button",onClick:t[6]||(t[6]=function(){return i.ondelete&&i.ondelete.apply(i,arguments)})}," Ã— ",512),[[r["vShow"],c.visible&&!n.dragging]])],34)}n("5319");var v={name:"Ticket",props:["boardIndex","ticketIndex","dragging"],setup:function(e){var t=Object(o["b"])();return{content:Object(r["computed"])((function(){return t.state.boards[e.boardIndex].tickets[e.ticketIndex]})),done:Object(r["computed"])((function(){return t.state.boards[e.boardIndex].done})),update:function(n){return t.commit("updateTicket",{boardIndex:e.boardIndex,ticketIndex:e.ticketIndex,data:n})},remove:function(){return t.commit("removeTicket",{boardIndex:e.boardIndex,ticketIndex:e.ticketIndex})}}},data:function(){return{editing:!1,visible:!1,style:{}}},watch:{editing:function(e){var t=this;if(0==e)""==this.text?this.remove():this.$refs.input.scrollTop=0;else{var n=this.$refs.show.clientHeight;this.$nextTick((function(){t.$refs.input.focus(),t.$refs.input.style.height=n+"px"}))}}},computed:{text:{get:function(){return this.content},set:function(e){this.update(e)}},parsedHtml:function(){return this.content.replace("  ","</br>")}},methods:{ondelete:function(){this.remove()},edit:function(){this.editing=!0}}},k=(n("fd89"),n("6b0d")),x=n.n(k);const g=x()(v,[["render",h],["__scopeId","data-v-6957c614"]]);var O=g,j={name:"Board",components:{draggable:p.a,Ticket:O},props:["boardIndex"],setup:function(e){var t=Object(o["b"])();return{tickets:Object(r["computed"])((function(){return t.state.boards[e.boardIndex].tickets})),title:Object(r["computed"])((function(){return t.state.boards[e.boardIndex].title})),setBoard:function(n){return t.commit("setBoard",{boardIndex:e.boardIndex,data:n})}}},data:function(){return{dragging:!1}},computed:{dictTickets:{get:function(){return this.tickets.map((function(e,t){return{index:t,value:e}}))},set:function(e){this.setBoard(e.map((function(e){return e.value})))}}},methods:{child:function(e){return this.$refs["ticket_"+e]},next:function(e){e<this.tickets.length-1&&this.child(e+1).edit()},prev:function(e){e>0&&this.child(e-1).edit()}}};n("764d"),n("98c2");const w=x()(j,[["render",b],["__scopeId","data-v-3c254db1"]]);var I=w,y={name:"App",components:{Board:I},data:function(){return{unsubscribe:null}},setup:function(){var e=Object(o["b"])();return{todoName:Object(r["computed"])((function(){return e.state.name})),boardCount:Object(r["computed"])((function(){return e.state.boards.length})),addTicket:function(){return e.commit("addTicket",{boardIndex:0,data:""})},parseMarkdown:function(t){return e.dispatch("parseMarkdown",{markdown:t})},convertMarkdown:function(){return e.dispatch("convertMarkdown")},subscribe:function(t){return e.subscribe(t)}}},created:function(){var e=this,t=acquireVsCodeApi();window.addEventListener("message",(function(n){var r=n.data;switch(r.command){case"read":null!=e.unsubscribe&&e.unsubscribe(),e.parseMarkdown(r.data),e.unsubscribe=e.subscribe((function(){e.convertMarkdown().then((function(e){t.postMessage({command:"write",data:e})}))}));break}})),t.postMessage({command:"created"})},methods:{addnew:function(){var e=this;this.addTicket(),this.$nextTick((function(){e.$refs.board[0].child(0).edit()}))}}};n("e2d2"),n("cda5");const T=x()(y,[["render",u],["__scopeId","data-v-28f912dc"]]);var M=T;Object(r["createApp"])(M).use(i).mount("#app")},"764d":function(e,t,n){"use strict";n("ae97")},"98c2":function(e,t,n){"use strict";n("c923")},a619:function(e,t,n){},ae97:function(e,t,n){},c923:function(e,t,n){},cda5:function(e,t,n){"use strict";n("da7a")},da7a:function(e,t,n){},e2d2:function(e,t,n){"use strict";n("4dc0")},fd89:function(e,t,n){"use strict";n("a619")}});
//# sourceMappingURL=app.bee139b6.js.map